<!DOCTYPE html>
<html>
<head>
    <title>JavaScript Call Native Sample</title>
</head>
<body>
    <h1>JavaScript Call Native Sample</h1>
    <p>The following buttons interact with the <code>chrome.webview.hostObjects.QWebView2</code> object. Open DevTools console to try running whatever code you like on this object.</p>

    <h2>Call_S_V</h2>
    <button id="invokeCall_S_V">Invoke Call_S_V</button><input type="text" id="invokeCall_S_V_Param1" placeholder="String parameter" />
    <label>Runs <code>chrome.webview.hostObjects.QWebView2.Call_S_V(paramValue1)</code></label>

    <h2>Call_S_D</h2>
    <button id="invokeCall_S_D">Invoke Call_S_D</button><input type="text" id="invokeCall_S_D_Param1" placeholder="String parameter" />
    <label>Runs <code>chrome.webview.hostObjects.QWebView2.Call_S_D(paramValue1)</code></label>
    <code><pre><span id="invokeCall_S_D_Output"></span></pre></code>

    <h2>Call_S_I</h2>
    <button id="invokeCall_S_I">Invoke Call_S_I</button><input type="text" id="invokeCall_S_I_Param1" placeholder="String parameter" />
    <label>Runs <code>chrome.webview.hostObjects.QWebView2.Call_S_I(paramValue1)</code></label>
    <code><pre><span id="invokeCall_S_I_Output"></span></pre></code>

    <h2>Call_S_S</h2>
    <button id="invokeCall_S_S">Invoke Call_S_S</button><input type="text" id="invokeCall_S_S_Param1" placeholder="String parameter" />
    <label>Runs <code>chrome.webview.hostObjects.QWebView2.Call_S_S(paramValue1)</code></label>
    <code><pre><span id="invokeCall_S_S_Output"></span></pre></code>

    <h2>Call_S_V (Async)</h2>
    <button id="invokeCall_S_V_async">Invoke Call_S_V async</button><input type="text" id="invokeCall_S_V_Param1_async" placeholder="String parameter" />
    <label>Runs <code>await chrome.webview.hostObjects.QWebView2.Call_S_V(paramValue1)</code></label>

    <h2>Call_S_D (Async)</h2>
    <button id="invokeCall_S_D_async">Invoke Call_S_D async</button><input type="text" id="invokeCall_S_D_Param1_async" placeholder="String parameter" />
    <label>Runs <code>await chrome.webview.hostObjects.QWebView2.Call_S_D(paramValue1)</code></label>
    <code><pre><span id="invokeCall_S_D_Output_async"></span></pre></code>

    <h2>Call_S_I (Async)</h2>
    <button id="invokeCall_S_I_async">Invoke Call_S_I async</button><input type="text" id="invokeCall_S_I_Param1_async" placeholder="String parameter" />
    <label>Runs <code>await chrome.webview.hostObjects.QWebView2.Call_S_I(paramValue1)</code></label>
    <code><pre><span id="invokeCall_S_I_Output_async"></span></pre></code>

    <h2>Call_S_S (Async)</h2>
    <button id="invokeCall_S_S_async">Invoke Call_S_S async</button><input type="text" id="invokeCall_S_S_Param1_async" placeholder="String parameter" />
    <label>Runs <code>await chrome.webview.hostObjects.QWebView2.Call_S_S(paramValue1)</code></label>
    <code><pre><span id="invokeCall_S_S_Output_async"></span></pre></code>

    <div id="div_iframe" style="display: none;">
        <h2>IFrame</h2>
    </div>

    <script>
        //! Create IFrame from the parent html page and load it
        function createIFrame() {
            var i = document.createElement("iframe");
            i.src = "https://appassets.example/ScenarioAddHostObject.html";
            i.scrolling = "auto";
            i.frameborder = "0";
            i.height = "90%";
            i.width = "100%";
            i.name = "iframe_name";
            var div = document.getElementById("div_iframe");
            div.appendChild(i); div.style.display = 'block';
        };

        window.onload = function () {
            if (window.top === window) {
                //createIFrame();
            }
        };

        //! [HostObjectUsage]
        document.getElementById("invokeCall_S_V").addEventListener("click", () => {
            const paramValue1 = document.getElementById("invokeCall_S_V_Param1").value;
            chrome.webview.hostObjects.sync.QWebView2.Call_S_V(1000, paramValue1);
        });

        document.getElementById("invokeCall_S_D").addEventListener("click", () => {
            const paramValue1 = document.getElementById("invokeCall_S_D_Param1").value;
            const resultValue = chrome.webview.hostObjects.sync.QWebView2.Call_S_D(1000, paramValue1);
            document.getElementById("invokeCall_S_D_Output").textContent = resultValue;
        });

        document.getElementById("invokeCall_S_I").addEventListener("click", () => {
            const paramValue1 = document.getElementById("invokeCall_S_I_Param1").value;
            const resultValue = chrome.webview.hostObjects.sync.QWebView2.Call_S_I(1000, paramValue1);
            document.getElementById("invokeCall_S_I_Output").textContent = resultValue;
        });

        document.getElementById("invokeCall_S_S").addEventListener("click", () => {
            const paramValue1 = document.getElementById("invokeCall_S_S_Param1").value;
            const resultValue = chrome.webview.hostObjects.sync.QWebView2.Call_S_S(1000, paramValue1);
            document.getElementById("invokeCall_S_S_Output").textContent = resultValue;
        });

        // ASYNC
        document.getElementById("invokeCall_S_V_async").addEventListener("click", async () => {
            const paramValue1 = document.getElementById("invokeCall_S_V_Param1_async").value;
            chrome.webview.hostObjects.QWebView2.Call_S_V(1000, paramValue1);
        });

        document.getElementById("invokeCall_S_D_async").addEventListener("click", async () => {
            const paramValue1 = document.getElementById("invokeCall_S_D_Param1_async").value;
            const resultValue = await chrome.webview.hostObjects.QWebView2.Call_S_D(1000, paramValue1);
            document.getElementById("invokeCall_S_D_Output_async").textContent = resultValue;
        });

        document.getElementById("invokeCall_S_I_async").addEventListener("click", async () => {
            const paramValue1 = document.getElementById("invokeCall_S_I_Param1_async").value;
            const resultValue = await chrome.webview.hostObjects.QWebView2.Call_S_I(1000, paramValue1);
            document.getElementById("invokeCall_S_I_Output_async").textContent = resultValue;
        });

        document.getElementById("invokeCall_S_S_async").addEventListener("click", async () => {
            const paramValue1 = document.getElementById("invokeCall_S_S_Param1_async").value;
            const resultValue = await chrome.webview.hostObjects.QWebView2.Call_S_S(1000, paramValue1);
            document.getElementById("invokeCall_S_S_Output_async").textContent = resultValue;
        });
        
        //! [HostObjectUsage]
    </script>
</body>
</html>